
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Using a basic gallery plugin on Octopress Site - gep13&#8217;s blog</title>
	<meta name="author" content="gep13">

	
	<meta name="description" content="Step by step guide on how to get basic image gallery working in Octopress site and building in appveyor" />

	
	<meta name="keywords" content="octopress, jeykll, gallery, imagemagick, mini-magick, appveyor" />

	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/feed" rel="alternate" title="gep13's blog" type="application/atom+xml">
	
	<link rel="canonical" href="http://www.gep13.co.uk/blog/using-a-basic-gallery-plugin-on-octopress-site/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
<link rel="stylesheet" type="text/css" href="http://assets.cookieconsent.silktide.com/current/style.min.css"/>
<script type="text/javascript" src="http://assets.cookieconsent.silktide.com/current/plugin.min.js"></script>
<script type="text/javascript">
	// <![CDATA[
		cc.initialise({
			cookies: {
				social: {
					title: 'Disqus et al.',
					description: 'Used for comments. You\'ll nee'+
							'd to log in to Disqus to leave'+
							' comments.'
				},
				analytics: {
					title: 'Analytics',
					description: 'Anonymously measure your use o'+
							'f this website to improve your'+
							' experience.'
				}
			},
			settings: {
				bannerPosition: "bottom",
				disableallsites: true
			}
		});
	// ]]>
</script>
<!-- End Cookie Consent plugin -->



<link rel="stylesheet" href="/ad-gallery/jquery.ad-gallery.css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/ad-gallery/jquery.ad-gallery.js?rand=302"></script>
<script type="text/javascript">
$(function() {
  var galleries = $('.ad-gallery').adGallery({
    loader_image: '/ad-gallery/loader.gif',
    width: 640,
  });
})
</script>
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/adnuguk">ADNUGUK</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="facebook" href="http://www.facebook.com/gary.e.park" title="Facebook">Facebook</a>
		
		
		<a class="google" href="https://plus.google.com/+GaryEwanPark" rel="author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/gep13" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/gep13" title="GitHub">GitHub</a>
		
		
		
		<a class="linkedin" href="http://www.linkedin.com/in/gep13">LinkedIn</a>
		
		
		
		<a class="delicious" href="http://delicious.com/gep13" title="Delicious">Delicious</a>
		
		
		
		<a class="rss" href="/feed" title="RSS">RSS</a>
		
	</div>
</nav>
<div class="profile-container">
  <div class="profilepic">
    <script src="/javascripts/md5.js"></script>
    <script type="text/javascript">
$(function(){
  $('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("gep13@gep13.co.uk") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
});
    </script>
  </div>
  <hgroup>
  <h1 class="site-title"><a href="/">gep13&#8217;s blog</a></h1>
  
  <p class="site-subtitle">Ramblings and Ponderings of a Microsoft Fan Boy&#8230;</p>
  
  </hgroup>
  
</div>
</header>
			</div>
		</div>
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="article-inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
   	<div class="meta"> 
 		<div class="date">








  


<time datetime="2014-09-08T00:00:00+00:00" data-updated="true" itemprop="datePublished">Sep 8th, 2014</time></div> 
 		<div class="tags">


	<a class='category' href='/blog/categories/octopress/'>octopress</a>


</div> 
 		 
 			<span class="comments"><a href="#disqus_thread">Comments</a></span> 
 		 
 	</div> 
	
	<h1 class="title" itemprop="name">Using a Basic Gallery Plugin on Octopress Site</h1>
	<div class="entry-content" itemprop="articleBody"><h2>I have a lot of photos, but where to put them?</h2>

<p>Over the years, I have collected a number of photos from various trips that I have been on, and I share them in various places, i.e. Facebook, Twitter, Flickr, etc.  However, from time to time, I want to include them easily into blog posts as well.  This is something that &ldquo;should&rdquo; be easy, but my experience over the last few days is that it isn&rsquo;t as simple as it should be.  This is especially useful when doing a tutorial blog post, and you want to capture a number of screen-shots and show them in order in a gallery.</p>

<p>Having finally figured out how to get it working, I thought I would list the steps here for anyone else that might be running into the same problem.</p>

<!--more-->


<h2>What do I want?</h2>

<p>The requirements that I am looking for break down as follows:</p>

<ul>
<li>once set-up, I should be able to upload one or more images into a gallery folder and they should automatically added to associated blog post</li>
<li>thumbnail images should be automatically generated for photos uploaded into gallery folder</li>
<li>when clicked, thumbnail images should open a pop-up with a larger image</li>
<li>images in the same gallery should allow browsing left and right when an image is in popup window</li>
<li>should work in a range of devices, desktop, tablet, phone</li>
<li>should work as part of my AppVeyor build</li>
</ul>


<p>After hunting around, and trying various different options, I finally settled on using this <a href="https://github.com/yortz/octopress_gallery">plugin</a>.  From it&rsquo;s description, it should have been easy to get set up and running, but unfortunately, it took a bit of head scratching.</p>

<p>In the description for the plugin there is no mention of the dependency on an application called <code>ImageMagick</code>.  Now, in hindsight, it is clear that this will be required, but when I was reading through the simple steps of setting this up, it never occurred to me.  So first up, let&rsquo;s get <code>ImageMagick</code> installed.  If you are using <a href="http://chocolatey.org/">Chocolatey</a> then this is as simple as:</p>

<p><code>choco install imagemagick.tool</code></p>

<p>With that installed, step through the remaining instructions on the plugin page.</p>

<p>In addition to those steps, I also decided to add support for <a href="http://fancybox.net/">Fancybox</a> to make the experience a little nicer.  This involved the following:</p>

<ol>
<li>Make a slight modification to the <code>gallery_tag.rb</code> to work with Fancybox.  This basically involved adding a class definition to teh anchor tag, and also changing the rel attribute to be the gallery name, so that Fancybox groups the images in the gallery together.  The final version of the change can be seen <a href="https://github.com/gep13/gep13.github.io/commit/8f597cd922ffc3556481e7148990bcaa675dcceb#diff-dc86fc94e212fa637e5f2689a8379e1fR10">here</a>.</li>
<li>Download <a href="http://fancyapps.com/fancybox/#license">Fancybox</a></li>
<li>Unblock/extract the zip file</li>
<li>Add the contents of the source folder to <code>source\fancybox</code> as I have done <a href="https://github.com/gep13/gep13.github.io/tree/source/source/fancybox">here</a></li>
<li><p>Make the following additions to your <code>source\_includes\custom\head.html</code> file</p>

<p> <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
</span><span class='line'><span class="nx">jQuery</span><span class="p">.</span><span class="nx">noConflict</span><span class="p">();</span> <span class="c1">// ender.js conflicts with jQuery</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">link</span> <span class="nx">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;/fancybox/jquery.fancybox.css&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;/fancybox/jquery.fancybox.pack.js&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">language</span><span class="o">=</span><span class="s2">&quot;Javascript&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
</span><span class='line'><span class="c1">// ender.js gobbles jQuery&#39;s ready event: Use ender.js $ instead</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;.fancybox&quot;</span><span class="p">).</span><span class="nx">fancybox</span><span class="p">();</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure></p></li>
<li><p>Create your gallery folder, and add the necessary changes to your config.yml file.  You can see the sample changes that I made <a href="https://github.com/gep13/gep13.github.io/commit/8f597cd922ffc3556481e7148990bcaa675dcceb">here</a>.</p></li>
<li>Add the gallery tag to your blog post.  In my case, this was <code>{{ 'gallery_1' | image_list }}</code></li>
<li>Then do a <code>rake generate</code></li>
<li>Assuming everything has worked, do a <code>rake preview</code> and view your hard work</li>
</ol>


<h2>Issue when doing rake generate</h2>

<p>When I first tried to do the above, the issue that I ran into looked like this:</p>

<blockquote><p>C:/projects/gep13-github-io/public/images/galleries/gallery_1/thumbs/6.jpg
149jekyll 2.3.0 | Error:  No such file or directory - identify -ping C:/Users/appveyor/AppData/Local/Temp/mini_magick20140907-3000-6k90ct.jpg</p></blockquote>

<p>This translates as, you don&rsquo;t have <code>ImageMagick</code> installed, go and get it.  I tried a few different installations, and ran into other issues with having the right developer DLL&rsquo;s and includes.  The upshot was, I couldn&rsquo;t find a solution to using the installed version of <code>ImageMagick</code>.  If however, I used the portable version, it works fine.  Go figure!</p>

<h2>Setting up AppVeyor</h2>

<p>So, the final piece of the puzzle, at least for me, was to get the same process working on AppVeyor, so that as part of the build process the thumbnails etc are generated.  Turns out again, thanks to AppVeyor extensibilty system, this is remarkably easy.  In fact, the changes that I need to make are exactly what I did on my own machine, i.e. install <code>ImageMagick</code> using Chocolatey.  Now, unlike my machine, the AppVeyor build machines don&rsquo;t have Chocolatey already installed, so we need to get it onto them.  This can be done using the <code>install</code> steps, as documented <a href="http://www.appveyor.com/docs/appveyor-yml">here</a>.</p>

<p>The final result was the following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">install</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ps</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">iex ((new-object net.webclient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ps</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">choco install imagemagick.tool</span>
</span></code></pre></td></tr></table></div></figure>


<p>Two simple steps.  The first to install Chocolatey, and the second to install <code>ImageMagick</code> portable edition.  This will now happen each time my AppVeyor build runs, and it will generate the thumbnails for each of my galleries.</p>

<p>Job done!</p>
</div>

</article>

	<div class="share">
	<!-- Go to www.addthis.com/dashboard to customize your tools -->
	<div class="addthis_sharing_toolbox"></div>

	<!-- Go to www.addthis.com/dashboard to customize your tools -->
	<script type="text/plain" class="cc-onconsent-social" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-54075e8542beba4d"></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 - gep13 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

<p>Theme: <a href="https://github.com/qingwang/octopress-theme-yinyang">YinYang</a></p>
</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/plain" class="cc-onconsent-social">
      var disqus_shortname = 'gep13';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.gep13.co.uk/blog/using-a-basic-gallery-plugin-on-octopress-site/';
        var disqus_url = 'http://www.gep13.co.uk/blog/using-a-basic-gallery-plugin-on-octopress-site/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/plain" class="cc-onconsent-analytics">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-20926037-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




		</div>
	</div>
</body>
</html>
