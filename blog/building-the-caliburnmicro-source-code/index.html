
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Building the Caliburn.Micro source code - gep13&#8217;s blog</title>
	<meta name="author" content="gep13">

	
	<meta name="description" content="Website of Gary Ewan Park, also known as gep13, a self declared Microsoft Fan Boy, husband, dad, and geek." />

	
	<meta name="keywords" content="gep13, blog, Microsoft, Fan Boy, Ramblings, Pondering, Gary Ewan Park" />

	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/feed" rel="alternate" title="gep13's blog" type="application/atom+xml">
	
	<link rel="canonical" href="http://www.gep13.co.uk/blog/building-the-caliburnmicro-source-code/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!-- meta tags for twitter card -->

    <meta property="twitter:card" content="summary">
    <meta property="twitter:site" content="gep13">
    <meta property="twitter:url" content="http://www.gep13.co.uk/blog/building-the-caliburnmicro-source-code/">
    <meta property="twitter:title" content="Building the Caliburn.Micro source code">
    <meta property="twitter:description" content="Website of Gary Ewan Park, also known as gep13, a self declared Microsoft Fan Boy, husband, dad, and geek.">


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
<link rel="stylesheet" type="text/css" href="http://assets.cookieconsent.silktide.com/current/style.min.css"/>
<script type="text/javascript" src="http://assets.cookieconsent.silktide.com/current/plugin.min.js"></script>
<script type="text/javascript">
	// <![CDATA[
		cc.initialise({
			cookies: {
				social: {
					title: 'Disqus et al.',
					description: 'Used for comments. You\'ll nee'+
							'd to log in to Disqus to leave'+
							' comments.'
				},
				analytics: {
					title: 'Analytics',
					description: 'Anonymously measure your use o'+
							'f this website to improve your'+
							' experience.'
				}
			},
			settings: {
				bannerPosition: "bottom",
				disableallsites: true
			}
		});
	// ]]>
</script>
<!-- End Cookie Consent plugin -->



<link rel="stylesheet" href="/ad-gallery/jquery.ad-gallery.css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/ad-gallery/jquery.ad-gallery.js?rand=302"></script>
<script type="text/javascript">
$(function() {
  var galleries = $('.ad-gallery').adGallery({
    loader_image: '/ad-gallery/loader.gif',
    width: 640,
  });
})
</script>
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/adnuguk">ADNUGUK</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="facebook" href="http://www.facebook.com/gary.e.park" title="Facebook">Facebook</a>
		
		
		<a class="google" href="https://plus.google.com/+GaryEwanPark" rel="author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/gep13" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/gep13" title="GitHub">GitHub</a>
		
		
		
		<a class="linkedin" href="http://www.linkedin.com/in/gep13">LinkedIn</a>
		
		
		
		<a class="delicious" href="http://delicious.com/gep13" title="Delicious">Delicious</a>
		
		
		
		<a class="rss" href="/feed" title="RSS">RSS</a>
		
	</div>
</nav>
<div class="profile-container">
  <div class="profilepic">
    <script src="/javascripts/md5.js"></script>
    <script type="text/javascript">
$(function(){
  $('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("gep13@gep13.co.uk") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
});
    </script>
  </div>
  <hgroup>
  <h1 class="site-title"><a href="/">gep13&#8217;s blog</a></h1>
  
  <p class="site-subtitle">Ramblings and Ponderings of a Microsoft Fan Boy&#8230;</p>
  
  </hgroup>
  
</div>
</header>
			</div>
		</div>
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="article-inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
   	<div class="meta"> 
 		<div class="date">








  


<time datetime="2012-10-10T17:30:57+00:00" data-updated="true" itemprop="datePublished">Oct 10th, 2012</time></div> 
 		<div class="tags">


	<a class='category' href='/blog/categories/general-development/'>general development</a>


</div> 
 		 
 			<span class="comments"><a href="#disqus_thread">Comments</a></span> 
 		 
 	</div> 
	
	<h1 class="title" itemprop="name">Building the Caliburn.Micro Source Code</h1>
	<div class="entry-content" itemprop="articleBody"><h1>Caliburn.Micro Nuget Package doesn’t work</h1>

<p>At the time of writing this blog post, the <a href="http://nuget.org/packages/Caliburn.Micro">Caliburn.Micro Nuget package</a> (Version 1.3.1) doesn’t install correctly.  It adds the necessary references to the Caliburn.Micro assemblies, but it doesn’t add the additional installation files to the project, namely the AppBootstrapper.cs and MainPageViewModel.cs.</p>

<p>Thankfully, this is a known issue with the Caliburn.Micro package (it is listed <a href="http://caliburnmicro.codeplex.com/workitem/237">here</a>) and is actually as a result in the way the Nuget itself <a href="http://nuget.codeplex.com/workitem/2396">changed</a>.  Now, this problem has actually already been fixed in the latest Caliburn.Micro source code (which you can find <a href="http://caliburnmicro.codeplex.com/SourceControl/changeset/view/62cf1765f4ba">here</a>) but due to some remaining WinRT issues, the 1.3.2 version of Caliburn.Micro has not been released yet.</p>

<p>So, what can you do if you want to get a working Nuget package?  The answer is to build the source code yourself.  Now, this may seem a little scary, but it really isn&#8217;t  and the following steps will work you through what you need to do.</p>

<h1>To Clone or to download</h1>

<p>The first decision that you will need to make is whether you want to Clone the Caliburn.Micro source control locally to your machine, or whether you just want to download the source code.  Due to the fact that I am lazy, the steps outlined here are going to talk you through the downloading route, but if you are interested in cloning the repository take a look at this article <a href="http://codeplex.codeplex.com/wikipage?title=Using%20TortoiseHG%20with%20CodePlex&amp;referringTitle=Source%20control%20clients&amp;ProjectName=codeplex">here</a>.</p>

<h1>Let’s get started</h1>

<p>So, first thing’s first, go ahead and download the latest Caliburn.Micro source code:</p>

<p><a href="http://www.gep13.co.uk/blog/?attachment_id=1466"><img src="http://www.gep13.co.uk/blog/wp-content/uploads/2012/10/Caliburn.Micro_Download.png" alt="" /></a></p>

<p>Once the zip file has downloaded:</p>

<ol>
<li><p>Go to the folder where you saved it</p></li>
<li><p>Right click on the zip file and select properties</p></li>
<li><p>Click the Unblock button</p></li>
<li><p>Click on Apply, then click OK</p></li>
<li><p>Right click on the zip file again and select Extract All, and walk through the extraction wizard</p></li>
</ol>


<p>Once that is complete, take a look at the contents of the folder.  In the root of the folder, you should see a “src” folder, which contains three Visual Studio solution files, namely:</p>

<ul>
<li><p>Caliburn.Micro.PackageBuilder.sln</p></li>
<li><p>Caliburn.Micro.sln</p></li>
<li><p>Caliburn.Micro.WinRT.sln</p></li>
</ul>


<p>In order to open the second solution file, you will need to have the Silverlight Tools and Windows Phone 7 SDK installed.</p>

<p>In order to open the last solution file, you are going to need to have Visual Studio 2012 along with .Net Framework 4.5 installed.  If you don’t, and you try to open this solution in Visual Studio 2010, you will be greeted with the following:</p>

<p><a href="http://www.gep13.co.uk/blog/?attachment_id=1465"><img src="http://www.gep13.co.uk/blog/wp-content/uploads/2012/10/Caliburn.Micro_.WinRT_not_opening.png" alt="" /></a></p>

<h1>Building the solutions</h1>

<p>Depending on what frameworks you are targeting, i.e. Silverlight, Windows Phone 7, WinRT, open the correct solution file, and switch to doing a “Release” build.  Build the solution, and ensure that there are no errors.  The act of building the solution actually only creates the output assemblies, it doesn&#8217;t generate the Nuget package.  To be clear, at this point, you can build either solution, or both.  The Nuget package created works on whatever it can find, and will place only the output assemblies that it can located in the resulting Nuget package.</p>

<h1>Creating the Nuget package</h1>

<p>Go back to the root folder of the zip file, and find the “nuget” folder.  In here, you will find a PowerShell file called “create-packages.ps1”.</p>

<p>Do the following:</p>

<ol>
<li><p>Open PowerShell as an Administrator</p></li>
<li><p>Run the command <em><strong>Get-ExecutionPolicy</strong></em></p></li>
<li><p>If this returns a value of “Restricted” then you are going to need to change this, otherwise the PowerShell script to create the Nuget package will not run.  The command that you will need to run is <strong><em>Set-ExecutionPolicy RemoteSigned</em></strong></p></li>
<li><p>Browse to the folder where the above .ps1 file is located</p></li>
<li><p>Run the following command <strong><em>.\create-package.ps1</em></strong></p></li>
<li><p>This will generate two Nuget packages, one called “Caliburn.Micro.1.3.2.nupkg” and “Caliburn.Micro.Start.1.3.2.nupkg”</p></li>
<li><p>Finally, if your previous execution policy for PowerShell was restricted, be sure to put this back.  To do this, run the command <strong><em>Set-ExecutionPolicy Restricted</em></strong></p></li>
</ol>


<h1>Why are there two Nuget packages?</h1>

<p>In version 1.3.1 of Caliburn.Micro, it was assumed that everyone who was using the Nuget package wanted the additional files that it included.  This wasn&#8217;t always the case (as some people roll their own AppBootstrapper, etc) and as a result, they would have to delete the unwanted files.  To work around this, the Caliburn.Micro assemblies are stored in the “Caliburn.Micro.1.3.2.nupkg” package, and the additional installation files are stored in “Caliburn.Micro.Start.1.3.2.nupkg”.  To complete the story, the “.Start” package takes a dependency on the main “Caliburn.Micro” package.  This way, a user has a choice of what they want to use; very clever!</p>

<h1>use a local Nuget repository</h1>

<p>Now that you have these Nuget packages, what do you do with them?  What I do is I create a folder on my C:\ drive, typically c:\nugetpackages and I put the Nuget packages in there.  Then, within Visual Studio select Tools | Library Package Manager | Package Manager Settings.  In the windows that opens up, select “Package Sources”, click the green &ldquo;add&rdquo; button, and enter “Local Nuget” as the Name, and “C:\nugetpackages” as the source, and click the “Update” button:</p>

<p><a href="http://www.gep13.co.uk/blog/?attachment_id=1467"><img src="http://www.gep13.co.uk/blog/wp-content/uploads/2012/10/Caliburn.Micro_Local_Nuget_Package_Source.png" alt="" /></a></p>

<p>With this in place, then either through the Package Manager Console you can use the “Local Nuget” source and install the package:</p>

<p><a href="http://www.gep13.co.uk/blog/?attachment_id=1469"><img src="http://www.gep13.co.uk/blog/wp-content/uploads/2012/10/Caliburn.Micro_Package_Manager_Console_Install.png" alt="" /></a></p>

<p>Or, through the “Mange Nuget Packages” dialog you can again select “Local Nuget” and select the package that you want to install:</p>

<p><a href="http://www.gep13.co.uk/blog/?attachment_id=1468"><img src="http://www.gep13.co.uk/blog/wp-content/uploads/2012/10/Caliburn.Micro_Manage_Nuget_Packages.png" alt="" /></a></p>
</div>

</article>

	<div class="share">
	<!-- Go to www.addthis.com/dashboard to customize your tools -->
	<div class="addthis_sharing_toolbox"></div>

	<!-- Go to www.addthis.com/dashboard to customize your tools -->
	<script type="text/plain" class="cc-onconsent-social" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-54075e8542beba4d"></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2015 - gep13 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

<p>Theme: <a href="https://github.com/qingwang/octopress-theme-yinyang">YinYang</a></p>
</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/plain" class="cc-onconsent-social">
      var disqus_shortname = 'gep13';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.gep13.co.uk/blog/building-the-caliburnmicro-source-code/';
        var disqus_url = 'http://www.gep13.co.uk/blog/building-the-caliburnmicro-source-code/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/plain" class="cc-onconsent-analytics">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-20926037-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




		</div>
	</div>
</body>
</html>
